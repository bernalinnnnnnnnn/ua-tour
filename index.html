<!DOCTYPE html>
<html lang="en">

<head>
  <meta property="og:title"
    content="UA360X: Immersive Virtual Tour Experience of the University of Abra's Main Campus Indoor Facilities">
  <meta property="og:description"
    content="Take a Virtual Step Into University of Abra's Main Campus Indoor Facilities â€“ UA360X.">
  <meta property="og:image" content="https://bernalinnnnnnnnn.github.io/ua-tour/assets/asist.png">
  <meta property="og:url" content="https://bernalinnnnnnnnn.github.io/ua-tour/">
  <meta property="og:type" content="website">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://bernalinnnnnnnnn.github.io/ua-tour/assets/asist.png">

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>UA360X</title>
  <link rel="stylesheet" href="index2.css">

  <style>
    /* Override styles for logo positioning */
    .viewer .overlay-logo {
      position: absolute;
      object-fit: contain;
      opacity: 0.85;
      pointer-events: none;
      z-index: 10;
      filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.6));
      transition: opacity 0.3s ease;
    }

    /* LEFT LOGO */
    .viewer .overlay-logo.left {
      top: 30px;
      left: 20px;
      width: 100px;
      height: 100px;
    }

    .viewer iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: none;
      z-index: 1;
    }

    @media (max-width: 768px) {
      .viewer .overlay-logo.left {
        top: 15px;
        left: 15px;
        width: 70px;
        height: 70px;
      }
    }

    @media (max-width: 480px) {
      .viewer .overlay-logo.left {
        top: 10px;
        left: 10px;
        width: 60px;
        height: 60px;
      }
    }

    /* FIX FOR RESPONSIVE PINS */
    .pin-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }

    .pin-container .pin {
      pointer-events: auto;
    }

    /* FOOTER STYLES */
    footer {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      color: #e0e0e0;
      padding: 30px 20px;
      text-align: center;
      border-top: 2px solid #0f3460;
      margin-top: 20px;
      font-size: 14px;
    }

    footer a {
      color: #00d4ff;
      text-decoration: none;
      margin: 0 15px;
      transition: color 0.3s ease;
    }

    footer a:hover {
      color: #00f0ff;
      text-decoration: underline;
    }

    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
    }

    .footer-links {
      margin: 15px 0;
    }

    .footer-bottom {
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px solid #0f3460;
      font-size: 12px;
      opacity: 0.8;
    }

    /* ABOUT MODAL STYLES */
    .about-modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      animation: fadeIn 0.3s ease;
    }

    .about-modal.show {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .about-content {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      padding: 40px;
      border-radius: 10px;
      max-width: 600px;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      animation: slideIn 0.3s ease;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    @keyframes slideIn {
      from {
        transform: translateY(-50px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .about-content h2 {
      color: #1a1a2e;
      margin-bottom: 20px;
      font-size: 24px;
    }

    .about-content p {
      color: #333;
      line-height: 1.6;
      margin-bottom: 15px;
    }

    .about-content h3 {
      color: #0f3460;
      margin-top: 25px;
      margin-bottom: 12px;
      font-size: 16px;
    }

    .about-content ul {
      color: #555;
      margin-left: 20px;
      line-height: 1.8;
    }

    .about-content ul li {
      margin-bottom: 8px;
    }

    .close-about {
      color: #666;
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
      transition: color 0.3s;
    }

    .close-about:hover {
      color: #000;
    }

    @media (max-width: 600px) {
      .about-content {
        padding: 25px;
        margin: 20px;
        max-height: 90vh;
      }

      .about-content h2 {
        font-size: 20px;
      }

      footer {
        padding: 20px 15px;
        font-size: 12px;
      }

      footer a {
        display: block;
        margin: 8px 0;
      }

      .footer-links {
        margin: 10px 0;
      }
    }
  </style>
</head>

<body>

  <header>
    <button id="menuBtn">â˜°</button>
    <h1>University of Abra, Main Campus</h1>
  </header>

  <div class="map-container" id="mapContainer">
    <img src="assets/ua2.jpg" alt="University of Abra Map" id="campusMap">
    <div class="pin-container" id="pinContainer"></div>
  </div>

  <div class="viewer" id="viewer">
    <iframe id="tourFrame" title="Campus Tour Viewer" src=""
      allow="accelerometer; gyroscope; xr-spatial-tracking"></iframe>

    <img id="leftLogo" src="assets/logos/logo.png" class="overlay-logo left">

    <button id="backBtn" class="back-btn" title="Back to home">
      <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
        <polyline points="9 22 9 12 15 12 15 22"></polyline>
      </svg>
    </button>
  </div>

  <div class="sidebar" id="sidebar">
    <iframe id="indexFrame" src="tours.html"></iframe>
  </div>

  <div class="overlay" id="overlay"></div>

  <!-- ABOUT MODAL -->
  <div class="about-modal" id="aboutModal">
    <div class="about-content">
      <span class="close-about" id="closeAbout">&times;</span>
      <h2>About UA360X</h2>
      
      <p>
        UA360X is an immersive virtual tour experience designed to showcase the indoor facilities of the University of Abra's Main Campus. This project brings campus exploration to your fingertips, allowing prospective students, visitors, and alumni to virtually step into our academic and administrative spaces.
      </p>

      <h3>Project Overview</h3>
      <p>
        Built with modern web technology and integrated 360-degree panoramic imagery, UA360X provides an interactive way to explore the university's diverse facilities from anywhere in the world.
      </p>

      <h3>Development Team</h3>
      <ul>
        <li><strong>Project Lead:</strong> [Developer Name]</li>
        <li><strong>Web Development:</strong> [Developer Name]</li>
        <li><strong>3D Imaging & VR Integration:</strong> [Developer Name]</li>
        <li><strong>User Experience Design:</strong> [Developer Name]</li>
      </ul>

      <h3>Institution</h3>
      <p>
        University of Abra, Main Campus<br>
        <em>Advancing Education, Empowering Communities</em>
      </p>

      <h3>Technologies Used</h3>
      <ul>
        <li>360-Degree Panoramic Photography</li>
        <li>Interactive Web Mapping</li>
        <li>Responsive Web Design</li>
        <li>Kuula VR Integration</li>
      </ul>

      <h3>Acknowledgments</h3>
      <p>
        We would like to extend our gratitude to the University of Abra administration, faculty, and staff for their support and cooperation in making this virtual tour possible.
      </p>

      <h3>Contact & Feedback</h3>
      <p>
        Have suggestions or questions? We'd love to hear from you.<br>
        <strong>Email:</strong> <a href="mailto:ua360x@uar.edu.ph" style="color: #0f3460;">ua360x@uar.edu.ph</a>
      </p>
    </div>
  </div>

  <!-- FOOTER -->
  <footer>
    <div class="footer-content">
      <div class="footer-links">
        <a href="#" id="aboutLink">About Us</a>
        <a href="#" id="privacyLink">Privacy Policy</a>
        <a href="mailto:ua360x@uar.edu.ph">Contact</a>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2024 University of Abra. All rights reserved. | UA360X Virtual Tour</p>
      </div>
    </div>
  </footer>

  <script>
    const pins = [
      { name: "College of Teacher Education", code: "7DxGN", link: "https://kuula.co/share/collection/7DxGN?logo=-1&info=0&fs=0&vr=0&sd=1&thumbs=-1&keys=0", top: "80%", left: "40.5%" },
      { name: "Information and Communication Technology Center", code: "7D308", link: "https://kuula.co/share/collection/7D308?logo=-1&info=0&fs=0&vr=0&sd=1&thumbs=-1&keys=0", top: "79%", left: "38.9%" },
      { name: "Asist Training and Development Center", code: "7DSkq", link: "https://kuula.co/share/collection/7DSkq?logo=-1&info=0&fs=0&vr=0&sd=1&thumbs=-1&keys=0", top: "72%", left: "41%" },
      { name: "Guidance and Counseling Office", code: "7H4Mc", link: "https://kuula.co/share/collection/7H4Mc?logo=-1&info=0&fs=0&vr=0&sd=1&thumbs=-1&keys=0", top: "86%", left: "40.8%" },
      { name: "Assist Gymnasium", code: "7H4MG", link: "https://kuula.co/share/collection/7H4MG?logo=-1&info=0&fs=0&vr=0&sd=1&thumbs=-1&keys=0", top: "66%", left: "33.5%" },
      { name: "Agriculture Laboratory Building", code: "7H4HH", link: "https://kuula.co/share/collection/7H4HH?logo=-1&info=0&fs=0&vr=0&sd=1&thumbs=-1&keys=0", top: "67%", left: "40%" },
      { name: "Asist Laboratory School", code: "7H4DT", link: "https://kuula.co/share/collection/7H4DT?logo=-1&info=0&fs=0&vr=0&sd=1&thumbs=-1&keys=0", top: "33%", left: "24%" },
      { name: "Natural Sciences Central Laboratory", code: "7H4qw", link: "https://kuula.co/share/hRVMg/collection/7H4qw?logo=-1&info=0&fs=0&vr=0&sd=1&thumbs=-1&keys=0", top: "74.5%", left: "40%" },
      { name: "College of Arts and Sciences", code: "7Dtgc", link: "https://kuula.co/share/collection/7Dtgc?logo=-1&info=0&fs=0&vr=0&sd=1&thumbs=-1&keys=0", top: "75%", left: "38%" },
      { name: "College of Agriculture", code: "7DrsL", link: "https://kuula.co/share/collection/7DrsL?logo=-1&info=0&fs=0&vr=0&sd=1&thumbs=-1&keys=0", top: "70.5%", left: "42.5%" },
      { name: "Executive House", code: "7DSqc", link: "https://kuula.co/share/h377s/collection/7DSqc?logo=-1&info=0&fs=0&vr=0&sd=1&thumbs=-1&keys=0", top: "56%", left: "31.8%" },
      { name: "Guest House", code: "7DSkB", link: "https://kuula.co/share/collection/7DSkB?logo=-1&info=0&fs=0&vr=0&sd=1&thumbs=-1&keys=0", top: "70%", left: "40.8%" },
      { name: "Student Center", code: "7DWfD", link: "https://kuula.co/share/h20kM/collection/7DWfD?logo=-1&info=0&fs=0&vr=0&sd=1&thumbs=-1&keys=0", top: "82%", left: "39.5%" },
      { name: "Forestry Laboratory Center", code: "7D3R5", link: "https://kuula.co/share/collection/7D3R5?logo=-1&info=0&fs=0&vr=0&sd=1&thumbs=-1&keys=0", top: "76%", left: "43.5%" },
      { name: "AFTIICC", code: "7HmCC", link: "https://kuula.co/share/hywss/collection/7HmCC?logo=-1&info=0&fs=0&vr=0&sd=1&gyro=0&thumbs=-1&keys=0", top: "50%", left: "31%" },
      { name: "Research and Extension Building", code: "7Hm6F", link: "https://kuula.co/share/hymVL/collection/7Hm6F?logo=-1&info=0&fs=0&vr=0&sd=1&thumbs=-1&keys=0", top: "50%", left: "28.8%" },
      { name: "HEAS Building", code: "7HmPt", link: "https://kuula.co/share/collection/7HmPt?logo=-1&info=0&fs=0&vr=0&sd=1&thumbs=-1&keys=0", top: "62%", left: "32%" },
      { name: "FFP Hall", code: "7HL6Z", link: "https://kuula.co/share/collection/7HL6Z?logo=-1&info=0&fs=0&vr=0&sd=1&thumbs=-1&keys=0", top: "40%", left: "24%" },
      { name: "Administration Building", code: "7HLDj", link: "https://kuula.co/share/collection/7HLDj?logo=-1&info=0&fs=0&vr=0&sd=1&thumbs=-1&keys=0", top: "37%", left: "25%" },
      { name: "Village Level Processing Unit", code: "7HLvX", link: "https://kuula.co/share/collection/7HLvX?logo=-1&info=0&fs=0&vr=0&sd=1&thumbs=-1&keys=0", top: "78%", left: "42.3%" },
      { name: "Home Technology Department", code: "7Hhr1", link: "https://kuula.co/share/hymQk/collection/7Hhr1?logo=-1&info=0&fs=0&vr=0&sd=1&thumbs=-1&keys=0", top: "38%", left: "23.5%" },
      { name: "Bamboo Textile Fiber Innovation Hub", code: "7H5Mg", link: "https://kuula.co/share/collection/7H5Mg?logo=-1&info=0&fs=0&vr=0&sd=1&thumbs=-1&keys=0", top: "78%", left: "33%" },
      { name: "Main Gate", code: "7H5CQ", link: "https://kuula.co/share/collection/7H5CQ?logo=-1&info=0&fs=0&vr=0&sd=1&thumbs=-1&keys=0", top: "37.5%", left: "21.2%" }
    ];

    const tourAssets = {
      "7HLDj": { left: "assets/logos/logo.png" },
      "7H4DT": { left: "assets/logos/logo.png" },
      "7Hm8L": { left: "assets/logos/logo.png" },
      "7Hhr1": { left: "assets/logos/logo.png" },
      "7HL6Z": { left: "assets/logos/logo.png" },
      "7Hm6F": { left: "assets/logos/logo.png" },
      "7HmCC": { left: "assets/logos/logo.png" },
      "7HmPt": { left: "assets/logos/logo.png" },
      "7Hmlp": { left: "assets/logos/logo.png" },
      "7DSYF": { left: "assets/logos/logo.png" },
      "7H4MG": { left: "assets/logos/logo.png" },
      "7H5Mg": { left: "assets/logos/logo.png" },
      "7D308": { left: "assets/logos/logo.png" },
      "7Dtgc": { left: "assets/logos/logo.png" },
      "7H4Mc": { left: "assets/logos/logo.png" },
      "7H4qw": { left: "assets/logos/logo.png" },
      "7DWfD": { left: "assets/logos/logo.png" },
      "7DxGN": { left: "assets/logos/logo.png" },
      "7D3R5": { left: "assets/logos/logo.png" },
      "7DrsL": { left: "assets/logos/logo.png" },
      "7DSkq": { left: "assets/logos/logo.png" },
      "7HLvX": { left: "assets/logos/logo.png" },
      "7H4HH": { left: "assets/logos/logo.png" },
      "7DSqc": { left: "assets/logos/logo.png" },
      "7DSkB": { left: "assets/logos/logo.png" },
      "7H5CQ": { left: "assets/logos/logo.png" }
    };

    const pinContainer = document.getElementById('pinContainer');
    const viewer = document.getElementById('viewer');
    const frame = document.getElementById('tourFrame');
    const backBtn = document.getElementById('backBtn');
    const sidebar = document.getElementById('sidebar');
    const menuBtn = document.getElementById('menuBtn');
    const overlay = document.getElementById('overlay');
    const leftLogo = document.getElementById('leftLogo');
    const mapContainer = document.getElementById('mapContainer');
    const aboutModal = document.getElementById('aboutModal');
    const aboutLink = document.getElementById('aboutLink');
    const closeAbout = document.getElementById('closeAbout');

    let currentTourCode = null;

    pins.forEach(p => {
      const el = document.createElement('div');
      el.className = 'pin';
      el.style.top = p.top;
      el.style.left = p.left;
      el.title = p.name;

      const tip = document.createElement('div');
      tip.className = 'tooltip';
      tip.innerText = p.name;
      el.appendChild(tip);

      el.addEventListener('click', ev => {
        ev.stopPropagation();
        openTour(p.link, p.code);
      });
      pinContainer.appendChild(el);
    });

    window.addEventListener('message', event => {
      if (event.data && event.data.type === 'openTour') {
        openTour(event.data.url, event.data.code);
      }
    });

    function updateOverlayImages(tourCode) {
      console.log('ðŸ“„ Updating LEFT logo only:', tourCode);

      leftLogo.style.opacity = '0';

      setTimeout(() => {
        if (tourAssets[tourCode]) {
          leftLogo.src = tourAssets[tourCode].left + "?v=" + Date.now();
        } else {
          leftLogo.src = "assets/logos/logo.png?v=" + Date.now();
        }
        leftLogo.style.opacity = '0.85';
        currentTourCode = tourCode;
      }, 120);
    }

    function openTour(url, tourCode) {
      if (!tourCode) {
        const match = url.match(/collection\/([a-zA-Z0-9]+)/);
        tourCode = match ? match[1] : null;
      }

      updateOverlayImages(tourCode);

      setTimeout(() => {
        frame.src = url;
      }, 150);

      if (!viewer.classList.contains('open')) {
        viewer.classList.add('open');
        viewer.setAttribute('aria-hidden', 'false');

        setTimeout(() => backBtn.classList.add('show'), 200);

        mapContainer.style.filter = 'blur(1px) brightness(.9)';
        closeSidebar();

        setTimeout(() => {
          if (viewer.requestFullscreen) viewer.requestFullscreen().catch(() => { });
        }, 300);
      }
    }

    function closeTour() {
      if (document.fullscreenElement) document.exitFullscreen();

      backBtn.classList.remove('show');
      viewer.classList.remove('open');
      viewer.setAttribute('aria-hidden', 'true');

      setTimeout(() => {
        frame.src = "";
        leftLogo.src = "assets/logos/logo.png";
        leftLogo.style.opacity = '0.85';
        currentTourCode = null;
      }, 400);

      mapContainer.style.filter = 'none';
    }

    backBtn.addEventListener('click', closeTour);

    viewer.addEventListener('click', e => {
      if (e.target === viewer) closeTour();
    });

    document.addEventListener('keydown', e => {
      if (e.key === 'Escape') { closeTour(); closeSidebar(); }
    });

    document.addEventListener('fullscreenchange', () => {
      if (!document.fullscreenElement && viewer.classList.contains('open')) {
        closeTour();
      }
    });

    function openSidebar() {
      sidebar.classList.add('open');
      overlay.classList.add('show');
    }

    function closeSidebar() {
      sidebar.classList.remove('open');
      overlay.classList.remove('show');
    }

    menuBtn.addEventListener('click', openSidebar);
    overlay.addEventListener('click', closeSidebar);

    // ABOUT MODAL HANDLERS
    aboutLink.addEventListener('click', (e) => {
      e.preventDefault();
      aboutModal.classList.add('show');
    });

    closeAbout.addEventListener('click', () => {
      aboutModal.classList.remove('show');
    });

    window.addEventListener('click', (e) => {
      if (e.target === aboutModal) {
        aboutModal.classList.remove('show');
      }
    });
  </script>

</body>

</html>